---
title: "GDP PPP"
filters:
  - shinylive
---

```{r}
gdp_data <- read.csv("data/API_NY.GDP.PCAP.PP.CD_DS2_en_csv_v2_204/API_NY.GDP.PCAP.PP.CD_DS2_en_csv_v2_204.csv", sep = ",", header = TRUE, skip = 4, check.names = T)
```


```{shinylive-r}
#| standalone: true
#| viewerHeight: 600
library(shiny)
library(bslib)
library(tidyverse)

# Define UI for application
ui <- fluidPage(
  titlePanel("GDP PPP"),
  sidebarLayout(
    sidebarPanel(
      selectInput("country", "Country:",
                  choices = unique(gdp_data$Country.Name),
                  selected = "Sweden"),
      selectInput("s_year", "Start Year:",
                  choices = colnames(gdp_data)[5:ncol(gdp_data)],
                  selected = 2000),
      selectInput("e_year", "End Year:",
                  choices = colnames(gdp_data)[5:ncol(gdp_data)],
                  selected = 2020)
                  
    ),
    mainPanel(
      plotOutput("gdp_plot")
    )
  )
)

# Define server logic
server <- function(input, output) {
  output$gdp_plot <- renderPlot({
    gdp_data %>%
      filter(Country.Name == input$country) %>%
      select(input$s_year:input$e_year) %>%
      pivot_longer(cols = everything(), names_to = "Year", values_to = "GDP") %>%
      ggplot(aes(x = Year, y = GDP)) +
      geom_line() +
      labs(title = paste("GDP PPP for", input$country),
           x = "Year",
           y = "GDP PPP")
  })
}

# Run the application
shinyApp(ui = ui, server = server)
```
